================================================================================
MATHLIB4 SIMP PRIORITY ANALYSIS REPORT
================================================================================

SUMMARY STATISTICS
----------------------------------------
Total simp rules found: 40,929
Files analyzed: 6,964
Analysis time: 1.3 seconds

Default priority: 40,804 (99.7%)
Custom priority: 125 (0.3%)
With modifiers (‚Üì‚Üê‚Üí): 5

CUSTOM PRIORITY BREAKDOWN
----------------------------------------
Priority high: 93 (74.4% of custom)
Priority low: 27 (21.6% of custom)

MODIFIER BREAKDOWN
----------------------------------------
Modifier '‚Üì': 3
Modifier '‚Üê': 2

TOP 10 MODULES BY SIMP RULE COUNT
----------------------------------------
Mathlib: 40833 rules (124 custom, 0.3%)
Archive: 43 rules (1 custom, 2.3%)
Counterexamples: 33 rules (0 custom, 0.0%)
MathlibTest: 20 rules (0 custom, 0.0%)
root: 0 rules (0 custom, 0.0%)
LongestPole: 0 rules (0 custom, 0.0%)
Cache: 0 rules (0 custom, 0.0%)
Shake: 0 rules (0 custom, 0.0%)
DownstreamTest: 0 rules (0 custom, 0.0%)
scripts: 0 rules (0 custom, 0.0%)

EXAMPLES OF CUSTOM PRIORITY RULES
----------------------------------------

Example 1:
File: Archive/Arithcc.lean:169
Attribute: simp‚Üì
Modifier: ‚Üì
Context: tion of the compiler (4.2).

This definition explicitly takes a map from variables to registers.
-/
@[simp‚Üì]
def compile (map : Identifier ‚Üí Register) : Expr ‚Üí Register ‚Üí List Instruction
  | Expr.con...

Example 2:
File: Mathlib/Order/Nat.lean:33
Attribute: simp high
Priority: high
Context: der : NoMaxOrder ‚Ñï where
  exists_gt n := ‚ü®n + 1, n.lt_succ_self‚ü©

/-! ### Miscellaneous lemmas -/

@[simp high] protected lemma bot_eq_zero : ‚ä• = 0 := rfl

/-- `Nat.find` is the minimum natural numbe...

Example 3:
File: Mathlib/NumberTheory/Divisors.lean:176
Attribute: simp high
Priority: high
Context: ‚â† 0 := by
  rw [‚Üê List.mem_toFinset, toFinset_divisorsAntidiagonalList, mem_divisorsAntidiagonal]

@[simp high]
lemma swap_mem_divisorsAntidiagonalList {a : ‚Ñï √ó ‚Ñï} :
    a.swap ‚àà n.divisorsAntidiagona...

Example 4:
File: Mathlib/NumberTheory/Divisors.lean:316
Attribute: simp high
Priority: high
Context: Antidiagonal_one : divisorsAntidiagonal 1 = {(1, 1)} := by
  ext
  simp [mul_eq_one, Prod.ext_iff]

@[simp high]
theorem swap_mem_divisorsAntidiagonal {x : ‚Ñï √ó ‚Ñï} :
    x.swap ‚àà divisorsAntidiagonal n...

Example 5:
File: Mathlib/NumberTheory/Divisors.lean:687
Attribute: simp high
Priority: high
Context: odMk_mem_divisorsAntidiag (hz : z ‚â† 0) : (x, y) ‚àà z.divisorsAntidiag ‚Üî x * y = z := by
  simp [hz]

@[simp high]
lemma swap_mem_divisorsAntidiag : xy.swap ‚àà z.divisorsAntidiag ‚Üî xy ‚àà z.divisorsAntidia...

Example 6:
File: Mathlib/AlgebraicGeometry/Gluing.lean:176
Attribute: simp (high), reassoc
Priority: high
Context: ùñ£.Œπ_jointly_surjective forget x

/-- Promoted to higher priority to short circuit simplifier. -/
@[simp (high), reassoc]
theorem glue_condition (i j : D.J) : D.t i j ‚â´ D.f j i ‚â´ D.Œπ j = D.f i j ‚â´ D.Œπ ...

Example 7:
File: Mathlib/Logic/Nonempty.lean:33
Attribute: simp low
Priority: low
Context: : we set low priority here, to ensure it is not applied before `exists_prop`
-- and `exists_const`.
@[simp low]
theorem exists_const_iff {Œ± : Sort*} {P : Prop} : (‚àÉ _ : Œ±, P) ‚Üî Nonempty Œ± ‚àß P :=
  Iff...

Example 8:
File: Mathlib/RingTheory/MatrixAlgebra.lean:207
Attribute: simp (high)
Priority: high
Context: le p.1 p.2 1 :=
  rfl

-- Porting note: short circuiting simplifier from simplifying left hand side
@[simp (high)]
theorem matrixEquivTensor_apply_single (i j : n) (x : A) :
    matrixEquivTensor n R ...

Example 9:
File: Mathlib/RingTheory/Nullstellensatz.lean:185
Attribute: simp (high)
Priority: high
Context: ngIdeal_singleton_isMaximal‚ü©

-- Porting note: marked this as high priority to short cut simplifier
@[simp (high)]
theorem IsPrime.vanishingIdeal_zeroLocus (P : Ideal (MvPolynomial œÉ k)) [h : P.IsPrim...

Example 10:
File: Mathlib/LinearAlgebra/Pi.lean:240
Attribute: simp high
Priority: high
Context: by
  simp_rw [lsum_apply, sum_apply, comp_apply, proj_apply, apply_single, Fintype.sum_pi_single']

@[simp high]
theorem lsum_single (S) [Fintype Œπ] [Semiring S]
    [‚àÄ i, Module S (œÜ i)] [‚àÄ i, SMulCo...

Example 11:
File: Mathlib/Topology/Instances/Rat.lean:110
Attribute: simp ‚Üê, push_cast
Modifier: ‚Üê
Context: nded_Icc (a : ‚Ñù) b)

end Rat

namespace NNRat

instance : MetricSpace ‚Ñö‚â•0 :=
  Subtype.metricSpace

@[simp ‚Üê, push_cast]
lemma dist_eq (p q : ‚Ñö‚â•0) : dist p q = dist (p : ‚Ñö) (q : ‚Ñö) := rfl
@[simp ‚Üê, pu...

Example 12:
File: Mathlib/Topology/Instances/Rat.lean:112
Attribute: simp ‚Üê, push_cast
Modifier: ‚Üê
Context: etricSpace

@[simp ‚Üê, push_cast]
lemma dist_eq (p q : ‚Ñö‚â•0) : dist p q = dist (p : ‚Ñö) (q : ‚Ñö) := rfl
@[simp ‚Üê, push_cast]
lemma nndist_eq (p q : ‚Ñö‚â•0) : nndist p q = nndist (p : ‚Ñö) (q : ‚Ñö) := rfl

insta...

Example 13:
File: Mathlib/Topology/Algebra/Module/Equiv.lean:510
Attribute: simp high
Priority: high
Context: ‚ÇÅ‚ÇÇ] M‚ÇÇ) = (f.trans f' : M‚ÇÅ ‚ÜíSL[œÉ‚ÇÅ‚ÇÉ] M‚ÇÉ) :=
  rfl

-- The priority should be higher than `comp_coe`.
@[simp high]
theorem coe_comp_coe_symm (e : M‚ÇÅ ‚âÉSL[œÉ‚ÇÅ‚ÇÇ] M‚ÇÇ) :
    (e : M‚ÇÅ ‚ÜíSL[œÉ‚ÇÅ‚ÇÇ] M‚ÇÇ).comp (e.symm ...

Example 14:
File: Mathlib/Topology/Algebra/Module/Equiv.lean:516
Attribute: simp high
Priority: high
Context: :=
  ContinuousLinearMap.ext e.apply_symm_apply

-- The priority should be higher than `comp_coe`.
@[simp high]
theorem coe_symm_comp_coe (e : M‚ÇÅ ‚âÉSL[œÉ‚ÇÅ‚ÇÇ] M‚ÇÇ) :
    (e.symm : M‚ÇÇ ‚ÜíSL[œÉ‚ÇÇ‚ÇÅ] M‚ÇÅ).comp (e :...

Example 15:
File: Mathlib/Topology/Algebra/Algebra/Equiv.lean:238
Attribute: simp high
Priority: high
Context: coe (e‚ÇÅ : A ‚âÉA[R] B) (e‚ÇÇ : B ‚âÉA[R] C) :
    e‚ÇÇ.toAlgHom.comp e‚ÇÅ.toAlgHom = e‚ÇÅ.trans e‚ÇÇ := by
  rfl

@[simp high]
theorem coe_comp_coe_symm (e : A ‚âÉA[R] B) :
    e.toContinuousAlgHom.comp e.symm = Cont...

Example 16:
File: Mathlib/Topology/Algebra/Algebra/Equiv.lean:243
Attribute: simp high
Priority: high
Context: ontinuousAlgHom.comp e.symm = ContinuousAlgHom.id R B :=
  ContinuousAlgHom.ext e.apply_symm_apply

@[simp high]
theorem coe_symm_comp_coe (e : A ‚âÉA[R] B) :
    e.symm.toContinuousAlgHom.comp e = Cont...

Example 17:
File: Mathlib/Topology/Sheaves/SheafCondition/EqualizerProducts.lean:105
Attribute: simp (high)
Priority: high
Context: (fork F U).œÄ.app WalkingParallelPair.zero = res F U :=
  rfl

-- Porting note: Shortcut simplifier
@[simp (high)]
theorem fork_œÄ_app_walkingParallelPair_one :
    (fork F U).œÄ.app WalkingParallelPair....

Example 18:
File: Mathlib/Analysis/InnerProductSpace/Projection.lean:1080
Attribute: simp high
Priority: high
Context: tion_orthogonal w).symm

-- Porting note: The priority should be higher than `Submodule.coe_inner`.
@[simp high]
theorem inner_orthogonalProjection_eq_of_mem_right [K.HasOrthogonalProjection] (u : K) ...

Example 19:
File: Mathlib/Analysis/InnerProductSpace/Projection.lean:1090
Attribute: simp high
Priority: high
Context: d_left, add_sub_cancel]

-- Porting note: The priority should be higher than `Submodule.coe_inner`.
@[simp high]
theorem inner_orthogonalProjection_eq_of_mem_left [K.HasOrthogonalProjection] (u : K) (...

Example 20:
File: Mathlib/Analysis/CStarAlgebra/CStarMatrix.lean:521
Attribute: simp high
Priority: high
Context: A} :
    toCLMNonUnitalAlgHom (A := A) M = MulOpposite.op (toCLM M) := rfl

open WithCStarModule in
@[simp high]
lemma toCLM_apply_single [DecidableEq m] {M : CStarMatrix m n A} {i : m} (a : A) :
    ...

================================================================================
CONCLUSION
================================================================================
The claim that 99.8% of mathlib4 uses default priorities is ACCURATE
Actual percentage using default priority: 99.7%
Actual percentage using custom priority: 0.3%